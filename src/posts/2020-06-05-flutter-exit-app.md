---
title: Flutter, 앱 종료하기 구현.
slug:/blog/flutter-exit-app
tags: chat, flutter, dev
---

플러터(Flutter)는 요즘 핫한 크로스 플랫폼 프레임워크 중에 하나이다.

이번에 프로젝트를 간단한 앱을 하나 만들일이 있어서 사용해봤는데, 환경설정은 리엑트 네이티브보다 좀 더 간단한 편이고, 기본적으로 제공하는 컴포넌트들이 많아서 생산성이 높아보인다.

다만, 플러터에 대한 자세한 내용보다는 그냥 이번에 만난 삽질에 대해 간단히 적어본다.

iOS에서는 앱을 사용자가 직접 종료하는 UI를 제공할일이 잘 없지만, 
Android같은 경우는 빈번하게 뒤로가기 버튼을 통해서 `종료하시겠습니까?`와 같은 UI를 제공하는 일이 흔하다. 앱을 다 만들고, 뒤로가기를 통해 앱이 종료되지 않고 한번 물어보게 만들기 위해서 Flutter에서 앱 종료를 어떤식으로 구현하는지 보다가 `exit()` 보다는 `SystemNavigator.pop()`를 사용하라는 내용을 보았고, 이대로 구현했다.

정상적으로 팝업 다이얼로그가 표시되고, 종료하기 버튼을 누르면 종료가 된다.
역시나 간단한 구현에 만족하며 기획자분에게 APK를 설치하여 테스트를 부탁했다.



그리고, 괴상한 버그 상황을 만나게 되었는데.. 
앱이 정상 종료는 잘 되는데, 종료한 후 다시 실행하면 즉시 혹은 잠시 후 튕겨버리는 것이다.

아래는 디버그 로그
```
Cannot execute operation because FlutterJNI is not attached to native.
...
```

사실, 아직 원인은 파악하지 못했다.
개인적으로는 종료되지 않고, 백그라운드에 앱이 남아있는 상태에서 이벤트를 처리하다가 새로 실행된 엑티비티도 죽여버리는 것 같은데.. 

일단은 `exit()`를 통해서 앱을 종료하도록 변경하였고, 별다른 문제는 없다.
그런데 기타 이벤트들을 처리할 시간을 안줄듯 해서 나중에 이부분은 다시 원인을 파악해봐야겠다.
